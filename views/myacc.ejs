<!DOCTYPE html>
<html lang="en">

<%- include('layouts/adopt/head') %>

    <body>
        <div class="container">
            <!-- NAVBAR START -->

            <%- include('layouts/adopt/adopthead', { title: 'My Account' }) %>

                <!-- NAVBAR END -->

                <!-- CONTENT START -->

                <div class="account-container">
                    <div class="content-account">
                        <div class="account-data">

                            <div class="data-list">

                                <!-- USERNAME START -->

                                <li class="account-item">Username</li>
                                <div class="acc-isi-luar">
                                    <div class="acc-isi" id="username">
                                        <%= user.username %>
                                    </div>
                                    <div class="form-popup" id="userForm" style="display: none;">
                                        <form action="/change-username" method="POST">
                                            <input type="text" placeholder="Enter new username" name="username"
                                                class="acc-isi new">
                                            <br>
                                            <div class="bottom">
                                                <button type="submit" class="change-button none center border"
                                                    id="btn-submit">Save Changes &nbsp;<i
                                                        class="fa-solid fa-check icon"></i></button>
                                                <button type="button" class="change-button none center border"
                                                    id="btn-close" onclick="closeUserForm()">Close &nbsp;<i
                                                        class="fa-solid fa-times icon"></i></button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="btn-change">
                                        <button class="change-button" id="btn-change" onclick="openUserForm()">
                                            <i class="fa-solid fa-pen"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- USERNAME END -->

                                <!-- EMAIL START -->

                                <li class="account-item">Email</li>
                                <div class="acc-isi">
                                    <%= user.email %>
                                </div>

                                <!-- EMAIL END -->

                                <!-- PASSWORD START -->

                                <li class="account-item">Password</li>
                                <div class="acc-isi-luar">
                                    <div class="acc-isi" id="password">********</div>
                                    <div class="form-popup none" id="passForm">
                                        <form action="/change-password" method="POST">
                                            <input type="password" placeholder="Enter new password" name="password"
                                                class="acc-isi new"><br>
                                            <input type="password" placeholder="Confirm new password"
                                                name="confirm_password" class="acc-isi new"><br>
                                            <div class="bottom">
                                                <button type="submit" class="change-button center border">Change
                                                    Password</button>
                                                <button type="button" class="change-button center border" id="btn-close"
                                                    onclick="closePassForm()">Close &nbsp;<i
                                                        class="fa-solid fa-times icon"></i></button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="btn-change">
                                        <button class="change-button" id="btn-change-pass" onclick="openPassForm()">
                                            <i class="fa-solid fa-pen"></i>
                                        </button>
                                        <button class="change-button none" type="submit" id="submitPass" onclick=""><i
                                                class="fa-solid fa-check"></i></button>
                                    </div>
                                </div>

                                <!-- PASSWORD END -->

                                <!-- DELETE BUTTON -->

                                <div class="bottom m-top">
                                    <button type="submit" class="change-button center border-2" id="btn-submit">Delete
                                        Account&nbsp;</button>
                                </div>

                                <!-- DELETE BUTTON -->

                            </div>
                        </div>
                    </div>
                </div>

                <!-- CONTENT END -->

        </div>

    </body>

    <script>
        document.getElementById('delete-button').addEventListener('click', function () {
            fetch('/deleteUser', {
                method: 'DELETE',
            })
<<<<<<< HEAD
            .then(response => response.json())
            .then(data => { // Log the data
                if (data.success) {
                    window.location.replace("/adopt");
                } else {
                    alert(data.message);
                }
            })
            .catch((error) => {
                console.error('Error:', error);
            });
=======
                .then(response => response.json())
                .then(data => { // Log the data
                    if (data.success) {
                        window.location.href = "/adopt";
                    } else {
                        alert(data.message);
                    }
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
>>>>>>> 8c54bdd62aaa18b855d2ddfc9e8241845ec7edef
        });

        function openUserForm() {
            document.getElementById("userForm").style.display = "block";
            document.getElementById("username").style.display = "none";
            document.getElementById("btn-change").style.display = "none";
            document.getElementById("btn-submit").style.display = "flex";
            document.getElementById("btn-close").style.display = "flex";
        }

        function openPassForm() {
            document.getElementById("passForm").style.display = "flex";
            document.getElementById("password").style.display = "none";
            document.getElementById("btn-change-pass").style.display = "none";
        }

        function closeUserForm() {
            document.getElementById("userForm").style.display = "none";
            document.getElementById("username").style.display = "block";
            document.getElementById("btn-change").style.display = "block";
        }

        function closePassForm() {
            document.getElementById("passForm").style.display = "none";
            document.getElementById("password").style.display = "block";
            document.getElementById("btn-change-pass").style.display = "block";
        }
    </script>

</html>